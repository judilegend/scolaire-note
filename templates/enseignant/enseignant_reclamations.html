{% extends "enseignant/layout.html" %} {% block title %}Réclamations - {{
matiere.nom }}{% endblock %} {% block page_title %}Réclamations - {{ matiere.nom
}}{% endblock %} {% block content %}
<div class="card">
  <h3><i class="fas fa-info-circle"></i> Informations sur la matière</h3>

  <div
    class="matiere-info"
    style="
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    "
  >
    <div>
      <p>
        <strong><i class="fas fa-book"></i> Matière:</strong> {{ matiere.nom }}
      </p>
    </div>
    <div>
      <p>
        <strong><i class="fas fa-graduation-cap"></i> Niveau:</strong> {{
        matiere.niveau }}
      </p>
    </div>
    <div>
      <p>
        <strong><i class="fas fa-code-branch"></i> Parcours:</strong> {{
        matiere.parcours }}
      </p>
    </div>
    <div>
      <p>
        <strong><i class="fas fa-balance-scale"></i> Coefficient:</strong> {{
        matiere.coefficient }}
      </p>
    </div>
  </div>

  <div
    style="display: flex; justify-content: space-between; align-items: center"
  >
    <a
      href="{{ url_for('enseignant.gerer_notes', matiere_id=matiere._id) }}"
      class="btn btn-primary"
    >
      <i class="fas fa-pen-to-square"></i> Gérer les notes
    </a>

    <a href="{{ url_for('enseignant.dashboard') }}" class="btn btn-secondary">
      <i class="fas fa-arrow-left"></i> Retour au tableau de bord
    </a>
  </div>
</div>

<div class="card">
  <h3><i class="fas fa-comment-dots"></i> Liste des réclamations</h3>

  {% if reclamations %}
  <ul class="reclamation-list">
    {% for rec in reclamations %}
    <li class="reclamation-item">
      <div class="reclamation-header">
        <div class="reclamation-info">
          <span class="reclamation-student"
            ><i class="fas fa-user-graduate"></i> {{ rec.nom_etudiant }}</span
          >
          <span class="reclamation-numero"
            ><i class="fas fa-id-card"></i> Numéro: {{ rec.numero_etudiant
            }}</span
          >
        </div>
        <span class="reclamation-date"
          >{{ rec.date|default('Récemment') }}</span
        >
      </div>
      <div class="reclamation-content">
        <i
          class="fas fa-quote-left"
          style="opacity: 0.3; margin-right: 5px"
        ></i>
        {{ rec.commentaire }}
      </div>
      <div class="reclamation-actions">
        <a
          href="{{ url_for('enseignant.gerer_notes', matiere_id=matiere._id) }}"
          class="btn btn-primary btn-sm"
        >
          <i class="fas fa-pen-to-square"></i> Modifier la note
        </a>
        <form
          method="POST"
          action="{{ url_for('enseignant.supprimer_reclamation', reclamation_id=rec._id) }}"
          style="display: inline"
        >
          <button type="submit" class="btn btn-danger btn-sm btn-delete">
            <i class="fas fa-trash-alt"></i> Supprimer
          </button>
        </form>
      </div>
    </li>
    {% endfor %}
  </ul>

  <div style="text-align: center; margin-top: 20px">
    <form
      method="POST"
      action="{{ url_for('enseignant.supprimer_reclamations_matiere', matiere_id=matiere._id) }}"
    >
      <button class="btn btn-danger btn-delete" type="submit">
        <i class="fas fa-trash-alt"></i> Supprimer toutes les réclamations de
        cette matière
      </button>
    </form>
  </div>
  {% else %}
  <div class="no-reclamations">
    <i
      class="fas fa-check-circle"
      style="
        font-size: 3rem;
        color: var(--success);
        display: block;
        margin-bottom: 15px;
      "
    ></i>
    <p>Aucune réclamation pour cette matière.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
